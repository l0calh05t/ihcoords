<!doctype html><html lang=en-us><head><meta charset=utf-8><meta content="width=device-width,initial-scale=1" name=viewport><title>Interactive Exploration of Homogeneous Coordinates and Rational Splines</title><script defer src=bundle.js></script><link href=main.css rel=stylesheet></head><body><div class=content-wrapper><div class=content-padding><main><header><h1>In­ter­ac­tive Ex­plo­ration of Ho­mo­ge­neous Co­or­di­nates and Ra­tio­nal Splines</h1><p>by Dr.-Ing. Johannes S. Mueller-Roemer</p></header><h2>Introduction</h2><p>Homogeneous coordinates are a core concept in computer graphics, computer vision, as well as other fields such as robotics. Furthermore, they simplify the definition and understanding of rational splines.</p><p>The aim of this page is to help gain an intuitive understanding of this mathematical concept through the use of interactive 3D diagrams. All diagrams can be rotated freely in three dimensions. Additionally, all points can be edited by clicking the corresponding node and dragging the arrow manipulators or by editing the entries in the homogeneous coordinate tables below each diagram.</p><h2>Homogeneous Coordinates</h2><p>Homogeneous (or projective) coordinates map each \(d\)-dimensional Cartesian coordinate \(\mathbf{p}\) to a set of \((d+1)\)-dimensional vectors \(\mathbf{p}_H\) in projective space:</p><p>\[\mathbf{p} \in \mathbb{R}^d \equiv \begin{pmatrix}w\mathbf{p}\\w\end{pmatrix} \in \mathbb{R}^{d + 1}\ \forall\ w \in \mathbb{R} \setminus \{0\} \]</p><p>Therefore, every<emph>point</emph>in Cartesian space maps to a<emph>line</emph>in projective space. When mapping from a Cartesian coordinate to a homogeneous coordinate, \(w\) is typically chosen to be 1. However, any value of \(w\) — except 0 — can be used. The inverse mapping corresponds to a simple division.</p><p>\[\mathbf{p} = \begin{pmatrix}p_1\\\vdots\\p_d\end{pmatrix} \rightarrow \begin{pmatrix}p_1\\\vdots\\p_d\\1\end{pmatrix} \qquad \mathbf{p}_H = \begin{pmatrix}p_{H,1}\\\vdots\\p_{H,d}\\w\end{pmatrix} \rightarrow \frac{1}{w} \begin{pmatrix}p_{H,1}\\\vdots\\p_{H,d}\end{pmatrix} \]</p><p>Usually, four-dimensional homogeneous coordinates are used to represent points in 3D space. However, four-dimensional coordinates are notoriously hard to grasp and visualize. Therefore, let us have a look at three-dimensional homogeneous coordinates representing points in the 2D plane. <a href=#figure-1>Figure 1</a> is a simple example showing a single homogeneous coordinate and the corresponding projected Cartesian coordinate. Try…</p><ul><li>…rotating the diagram</li><li>…editing the point in 3D</li><li>…editing the point using the provided text fields</li></ul>Also consider the following: if every <em>point</em> in Cartesian coordinates corresponds to a line of homogeneous coordinate with \(w \neq 0\), what could a homogeneous coordinate with \(w = 0\) (but \(\|(p_{H,1}, \dots, p_{H,d})^T\|_2 > 0\)) signify?<p></p><figure class=canvas-container-container id=figure-1><div class=canvas-container><canvas id=canvas-1 role=img></canvas></div><figcaption>Figure 1: A single point with initial homogeneous coordinates \(\mathbf{p}_H = (6, 4, 2)^T\), corresponding to the point \(\mathbf{p} = (3, 2)^T\) in Cartesian space. Try rotating the diagram and clicking the point to edit it. Both the two-dimensional Cartesian point and the three-dimensional homogeneous coordinate are shown, as well as the line of equivalent homogeneous coordinates.</figcaption></figure><p>Now that we have a grasp of <em>how</em> homogeneous coordinates work, let us move on to the <em>why</em>. Why should you introduce more complexity by adding an additional dimension, just to divide the additional coordinate away? One central reason we use homogenous coordinates in computer graphics is that affine transformations become just as easily representable and composable as linear transformations in Cartesian coordinates. In 2D Cartesian coordinates, any linear transformation — rotation and scaling around the origin, as well as shears and reflections — can be represented using a 2×2 matrix \(\mathbf{A}\):</p><p>\[\mathbf{\hat{p}} = \mathbf{A}\mathbf{p}\]</p><p>Furthermore, any series of linear transformations \(\mathbf{A}_1, \ldots, \mathbf{A}_n\) can simply be composed by multiplying the corresponding matrices:</p><p>\[\mathbf{\hat{p}} = \mathbf{A}_n\ldots\mathbf{A}_1\mathbf{p}\]</p><p>However, when working with 2D — or 3D — points, <em>affine</em> transformations such as translations by a vector \(\mathbf{b}\), rotation/scaling around points other than the origin, etc. are frequently required. While these can be represented as</p><p>\[\mathbf{\hat{p}} = \mathbf{A}\mathbf{p} + \mathbf{b},\]</p><p>affine transformations are more difficult to compose and you have to keep track of two separate pieces of data — the matrix \(\mathbf{A}\) and the vector \(\mathbf{b}\).</p><p>In homogeneous coordinates, any affine transformation can be represented as</p><p>\[\mathbf{\hat{p}}_H = \mathbf{A}_H\mathbf{p}_H,\ \text{where}\ \mathbf{A}_H = \begin{pmatrix}\mathbf{A} & \mathbf{b}\\\mathbf{0}^T & 1\end{pmatrix}.\]</p><p>As affine transformations in Cartesian coordinates are simple linear transformations in homogeneous coordinates, they are both easier to store and easier to compose. When \(\mathbf{A}_H\) is set up as above and \(\mathbf{p}_H\) is set up with \(w = 1\), you could even omit the division when converting back to Cartesian coordinates.</p><p><a href=#figure-2>Figure 2</a> allows you to experiment with transformations in homogeneous coordinates. Try setting up various translations, scalings, and 90° rotations. What kind of three-dimensional linear transform does a pure 2D translation</p><p>\[\mathbf{A}_H = \begin{pmatrix}1 & 0 & x\\0 & 1 & y\\0 & 0 & 1\end{pmatrix}.\]</p><p>correspond to?</p><p>You can also try setting</p><p>\[\mathbf{A}_H = \begin{pmatrix}1 & 0 & 0\\0 & 0 & 0\\0 & 1 & 0\end{pmatrix}.\]</p><p>Is the resulting transformation affine? Look at the transformed point in the XY-view while moving around the node, especially when moving it along X at different values of Y. How would you describe what is happening? Can you think of anything similar that could be useful in 3D graphics?</p><figure class=canvas-container-container id=figure-2><div class=canvas-container><canvas id=canvas-2 role=img></canvas></div><figcaption>Figure 2: A single point with initial homogeneous coordinates \(\mathbf{p}_H = (6, 4, 2)^T\), corresponding to the point \(\mathbf{p} = (3, 2)^T\) in Cartesian space, as in <a href=#figure-1>Figure 1</a>. Additionally, you can edit the transformation matrix \(\mathbf{A}_H\) — which is initialized to a translation of \((1, 1)^T\) — applied to the homogeneous coordinate. The transformed homogenous coordinate (and the corresponding projected coordinate and projection line) are shown transparently.</figcaption></figure><p>At this point, you probably have a good grasp of what homogeneous coordinates are, why they are useful, and how to use them — from an intuitive point of view and not only a theoretical one.</p><h2>Rational Splines</h2><p>Another area of computer graphics in which homogeneous coordinates are very useful are splines. Splines are mathematical functions that emulate physical splines (mostly called flexible curves today) — thin strips of flexible wood (or other materials) that are fixed at specific points and create a smooth curve in between. Splines are designed to have <em>local support</em>, i.e. the effect of a single control point is limited to a small part of the entire function. This is usually achieved using piecewise polynomial parametric curves.</p><p>One of the most popular splines in computer graphics is the B-spline. Given a knot sequence \(t_i\), i.e the values of the parameter \(u\) where the polynomial pieces meet, and a set of control points \(\mathbf{p}_i\), the B-spline basis function can be recursively defined as</p><p>\[B_{i,1}(u) \coloneqq \left\{ \begin{matrix}1 & \text{if} & t_i \leq u ≤ t_{i + 1} \\0 & & \text{otherwise}\end{matrix}\right.\]</p><p>\[B_{i,k+1}(u) \coloneqq \omega_{i,k}(u) B_{i,k}(u) + (1 - \omega_{i+1,k}(u))B_{i+1,k}(u),\]</p><p>where</p><p>\[\omega_{i,k}(u) \coloneqq \left\{ \begin{matrix}\frac{u - t_i}{t_{i+k} - t_i} & \text{if} & t_{i+k} \neq t_i \\ 0 & & \text{otherwise} \end{matrix}\right.. \]</p><p>Then, the order-\(n\) B-spline is evaluated as a simple weighted sum</p><p>\[S_{n}(u) = \sum_i \mathbf{p}_i B_{i,n}(u).\]</p><p><a href=#figure-3>Figure 3</a> shows a third-order B-spline with 6 control points. The spline shown is a cardinal — or uniform — B-spline, i.e. the knots are evenly spaced. Try moving the control points and observe which parts of the spline are affected.</p><figure class=canvas-container-container id=figure-3><div class=canvas-container><canvas id=canvas-3 role=img></canvas></div><figcaption>Figure 3: Third-order cardinal B-spline with 6 control points. Camera navigation is locked in this figure and \(w\) is fixed at 1. The \(x\) and \(y\) coordinates of each control point can be edited as usual. In addition to the smooth spline, the dashed lines connect the control points in a straight line.</figcaption></figure><p>While B-splines are already quite useful, many shapes, such as circles, can not be represented exactly using B-splines. Also, the importance of each control point is equal, so explicitly creating a smoother or less smooth part of the spline is not possible without adding control points and/or editing the knots. By evaluating the B-spline with \((d + 1)\)-dimensional homogeneous coordinates then projecting it into the Cartesian coordinate space, you get a <em>rational</em> B-spline.</p><p>As you can try out for yourself in <a href=#figure-4>Figure 4</a>, this has the effect of turning the \(w\)-coordinate into a <em>weight</em>. Control points with \(w > 1\) have a larger effect on the resulting curve than those with \(w &lt; 1\). As good a reason as any to call our vector components \(x\), \(y\), \(z\), and \(w\) — in that order — despite everything we learned in our ABCs.</p><figure class=canvas-container-container id=figure-4><div class=canvas-container><canvas id=canvas-4 role=img></canvas></div><figcaption>Figure 4: Third-order uniform rational B-spline with 6 control points. While the initial Cartesian positions of the control points match those in <a href=#figure-3>Figure 3</a>, \(\mathbf{p}_2\) and \(\mathbf{p}_4\) have an initial \(w > 1\). If you rotate the diagram out of the XY-view, you will see the projection surface resulting from the projection of the three-dimensional B-spline to the two-dimensional rational B-spline.</figcaption></figure><p>I hope this article and especially the interactive diagrams therein have been useful to you in learning about homogeneous coordinates and rational splines. Should you have any questions or suggestions for improvements, feel free to contact me.</p></main></div><div class=push aria-hidden=true></div></div><footer class=site-footer><span>Copy­right © 2020–2021 J. S. Mueller-Roemer</span></footer></body></html>